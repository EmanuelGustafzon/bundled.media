/* esm.sh - esbuild bundle(bcp-47@2.1.0) deno production */
import{isAlphanumerical as u}from"/v117/is-alphanumerical@2.0.1/deno/is-alphanumerical.mjs";import{isAlphabetical as l}from"/v117/is-alphabetical@2.0.1/deno/is-alphabetical.mjs";import{isDecimal as h}from"/v117/is-decimal@2.0.1/deno/is-decimal.mjs";var f=["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"];var d={"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"};var C={}.hasOwnProperty;function A(r,s={}){let o=p(),i=String(r),t=i.toLowerCase(),e=0;if(r==null)throw new Error("Expected string, got `"+r+"`");if(C.call(d,t)){let n=d[t];return(s.normalize===void 0||s.normalize===null||s.normalize)&&typeof n=="string"?A(n):(o[f.includes(t)?"regular":"irregular"]=i,o)}for(;l(t.charCodeAt(e))&&e<9;)e++;if(e>1&&e<9){if(o.language=i.slice(0,e),e<4){let n=0;for(;t.charCodeAt(e)===45&&l(t.charCodeAt(e+1))&&l(t.charCodeAt(e+2))&&l(t.charCodeAt(e+3))&&!l(t.charCodeAt(e+4));){if(n>2)return c(e,3,"Too many extended language subtags, expected at most 3 subtags");o.extendedLanguageSubtags.push(i.slice(e+1,e+4)),e+=4,n++}}for(t.charCodeAt(e)===45&&l(t.charCodeAt(e+1))&&l(t.charCodeAt(e+2))&&l(t.charCodeAt(e+3))&&l(t.charCodeAt(e+4))&&!l(t.charCodeAt(e+5))&&(o.script=i.slice(e+1,e+5),e+=5),t.charCodeAt(e)===45&&(l(t.charCodeAt(e+1))&&l(t.charCodeAt(e+2))&&!l(t.charCodeAt(e+3))?(o.region=i.slice(e+1,e+3),e+=3):h(t.charCodeAt(e+1))&&h(t.charCodeAt(e+2))&&h(t.charCodeAt(e+3))&&!h(t.charCodeAt(e+4))&&(o.region=i.slice(e+1,e+4),e+=4));t.charCodeAt(e)===45;){let n=e+1,a=n;for(;u(t.charCodeAt(a));){if(a-n>7)return c(a,1,"Too long variant, expected at most 8 characters");a++}if(a-n>4||a-n>3&&h(t.charCodeAt(n)))o.variants.push(i.slice(n,a)),e=a;else break}for(;t.charCodeAt(e)===45&&!(t.charCodeAt(e+1)===120||!u(t.charCodeAt(e+1))||t.charCodeAt(e+2)!==45||!u(t.charCodeAt(e+3)));){let n=e+2,a=0;for(;t.charCodeAt(n)===45&&u(t.charCodeAt(n+1))&&u(t.charCodeAt(n+2));){let g=n+1;for(n=g+2,a++;u(t.charCodeAt(n));){if(n-g>7)return c(n,2,"Too long extension, expected at most 8 characters");n++}}if(!a)return c(n,4,"Empty extension, extensions must have at least 2 characters of content");o.extensions.push({singleton:i.charAt(e+1),extensions:i.slice(e+3,n).split("-")}),e=n}}else e=0;if(e===0&&t.charCodeAt(e)===120||t.charCodeAt(e)===45&&t.charCodeAt(e+1)===120){e=e?e+2:1;let n=e;for(;t.charCodeAt(n)===45&&u(t.charCodeAt(n+1));){let a=e+1;for(n=a;u(t.charCodeAt(n));){if(n-a>7)return c(n,5,"Too long private-use area, expected at most 8 characters");n++}o.privateuse.push(i.slice(e+1,n)),e=n}}if(e!==i.length)return c(e,6,"Found superfluous content after tag");return o;function c(n,a,g){return s.warning&&s.warning(g,a,n),s.forgiving?o:p()}}function p(){return{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}function x(r={}){let s=[];if(r.irregular)return r.irregular;if(r.regular)return r.regular;if(r.language){s=s.concat(r.language,r.extendedLanguageSubtags||[],r.script||[],r.region||[],r.variants||[]);let o=r.extensions||[],i=-1;for(;++i<o.length;){let t=o[i];t.singleton&&t.extensions&&t.extensions.length>0&&s.push(t.singleton,...t.extensions)}}return r.privateuse&&r.privateuse.length>0&&s.push("x",...r.privateuse),s.join("-")}export{A as parse,x as stringify};
//# sourceMappingURL=bcp-47.mjs.map