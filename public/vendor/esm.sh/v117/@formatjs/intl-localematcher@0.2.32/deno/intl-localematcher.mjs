/* esm.sh - esbuild bundle(@formatjs/intl-localematcher@0.2.32) deno production */
function I(n){return Intl.getCanonicalLocales(n)}var b=/-u(?:-[0-9a-z]{2,8})+/gi;function E(n,o,i){if(i===void 0&&(i=Error),!n)throw new i(o)}function s(n,o){for(var i=o;;){if(n.has(i))return i;var r=i.lastIndexOf("-");if(!~r)return;r>=2&&i[r-2]==="-"&&(r-=2),i=i.slice(0,r)}}function z(n,o,i){for(var r={locale:""},f=0,c=o;f<c.length;f++){var e=c[f],a=e.replace(b,""),t=s(n,a);if(t)return r.locale=t,e!==a&&(r.extension=e.slice(a.length+1,e.length)),r}return r.locale=i(),r}function L(n,o,i){var r={},f={},c={},e=new Set;n.forEach(function(l){var u=new Intl.Locale(l).minimize().toString(),g=Intl.getCanonicalLocales(l)[0]||l;r[u]=l,f[l]=l,c[g]=l,e.add(u),e.add(l),e.add(g)});for(var a,t=0,v=o;t<v.length;t++){var h=v[t];if(a)break;var p=h.replace(b,"");if(n.has(p)){a=p;break}if(e.has(p)){a=p;break}var O=new Intl.Locale(p),m=O.maximize().toString(),d=O.minimize().toString();if(e.has(d)){a=d;break}a=s(e,m)}return a?{locale:f[a]||c[a]||r[a]||a}:{locale:i()}}function U(n,o){E(o.length===2,"key must have 2 elements");var i=n.length,r="-".concat(o,"-"),f=n.indexOf(r);if(f!==-1){for(var c=f+4,e=c,a=c,t=!1;!t;){var v=n.indexOf("-",a),h=void 0;v===-1?h=i-a:h=v-a,h===2?t=!0:v===-1?(e=i,t=!0):(e=v,a=v+1)}return n.slice(c,e)}if(r="-".concat(o),f=n.indexOf(r),f!==-1&&f+3===i)return""}function x(n,o,i,r,f,c){var e=i.localeMatcher,a;e==="lookup"?a=z(n,o,c):a=L(n,o,c);for(var t=a.locale,v={locale:"",dataLocale:t},h="-u",p=0,O=r;p<O.length;p++){var m=O[p];E(t in f,"Missing locale data for ".concat(t));var d=f[t];E(typeof d=="object"&&d!==null,"locale data ".concat(m," must be an object"));var l=d[m];E(Array.isArray(l),"keyLocaleData for ".concat(m," must be an array"));var u=l[0];E(typeof u=="string"||u===null,"value must be string or null but got ".concat(typeof u," in key ").concat(m));var g="";if(a.extension){var S=U(a.extension,m);S!==void 0&&(S!==""?~l.indexOf(S)&&(u=S,g="-".concat(m,"-").concat(u)):~S.indexOf("true")&&(u="true",g="-".concat(m)))}if(m in i){var N=i[m];E(typeof N=="string"||typeof N>"u"||N===null,"optionsValue must be String, Undefined or Null"),~l.indexOf(N)&&N!==u&&(u=N,g="")}v[m]=u,h+=g}if(h.length>2){var C=t.indexOf("-x-");if(C===-1)t=t+h;else{var M=t.slice(0,C),w=t.slice(C,t.length);t=M+h+w}t=Intl.getCanonicalLocales(t)[0]}return v.locale=t,v}function X(n,o){for(var i=[],r=0,f=o;r<f.length;r++){var c=f[r],e=c.replace(b,""),a=s(n,e);a&&i.push(a)}return i}function q(n,o,i,r){var f=o.reduce(function(c,e){return c.add(e),c},new Set);return x(f,I(n),{localeMatcher:r?.algorithm||"best fit"},[],{},function(){return i}).locale}export{X as LookupSupportedLocales,x as ResolveLocale,q as match};
//# sourceMappingURL=intl-localematcher.mjs.map