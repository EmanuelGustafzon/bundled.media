/* esm.sh - esbuild bundle(rxjs@7.5.7/internal/operators/timeout) deno production */
import{asyncScheduler as b}from"/v115/rxjs@7.5.7/deno/internal/scheduler/async.js";import{isValidDate as v}from"/v115/rxjs@7.5.7/deno/internal/util/isDate.js";import{operate as w}from"/v115/rxjs@7.5.7/deno/internal/util/lift.js";import{innerFrom as y}from"/v115/rxjs@7.5.7/deno/internal/observable/innerFrom.js";import{createErrorClass as E}from"/v115/rxjs@7.5.7/deno/internal/util/createErrorClass.js";import{createOperatorSubscriber as S}from"/v115/rxjs@7.5.7/deno/internal/operators/OperatorSubscriber.js";import{executeSchedule as T}from"/v115/rxjs@7.5.7/deno/internal/util/executeSchedule.js";var x=E(e=>function(t=null){e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t});function j(e,i){let{first:t,each:n,with:p=F,scheduler:s=i??b,meta:d=null}=v(e)?{first:e}:typeof e=="number"?{each:e}:e;if(t==null&&n==null)throw new TypeError("No timeout provided.");return w((f,o)=>{let a,r,u=null,l=0,c=m=>{r=T(o,s,()=>{try{a.unsubscribe(),y(p({meta:d,lastValue:u,seen:l})).subscribe(o)}catch(h){o.error(h)}},m)};a=f.subscribe(S(o,m=>{r?.unsubscribe(),l++,o.next(u=m),n>0&&c(n)},void 0,void 0,()=>{r?.closed||r?.unsubscribe(),u=null})),!l&&c(t!=null?typeof t=="number"?t:+t-s.now():n)})}function F(e){throw new x(e)}export{x as TimeoutError,j as timeout};
//# sourceMappingURL=timeout.js.map