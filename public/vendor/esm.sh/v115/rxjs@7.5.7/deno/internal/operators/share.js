/* esm.sh - esbuild bundle(rxjs@7.5.7/internal/operators/share) deno production */
import{innerFrom as w}from"/v115/rxjs@7.5.7/deno/internal/observable/innerFrom.js";import{Subject as O}from"/v115/rxjs@7.5.7/deno/internal/Subject.js";import{SafeSubscriber as C}from"/v115/rxjs@7.5.7/deno/internal/Subscriber.js";import{operate as R}from"/v115/rxjs@7.5.7/deno/internal/util/lift.js";function U(s={}){let{connector:r=()=>new O,resetOnError:m=!0,resetOnComplete:u=!0,resetOnRefCountZero:h=!0}=s;return x=>{let t,e,n,c=0,i=!1,l=!1,f=()=>{e?.unsubscribe(),e=void 0},a=()=>{f(),t=n=void 0,i=l=!1},S=()=>{let o=t;a(),o?.unsubscribe()};return R((o,v)=>{c++,!l&&!i&&f();let b=n=n??r();v.add(()=>{c--,c===0&&!l&&!i&&(e=p(S,h))}),b.subscribe(v),!t&&c>0&&(t=new C({next:d=>b.next(d),error:d=>{l=!0,f(),e=p(a,m,d),b.error(d)},complete:()=>{i=!0,f(),e=p(a,u),b.complete()}}),w(o).subscribe(t))})(x)}}function p(s,r,...m){if(r===!0){s();return}if(r===!1)return;let u=new C({next:()=>{u.unsubscribe(),s()}});return r(...m).subscribe(u)}export{U as share};
//# sourceMappingURL=share.js.map